
<html lang="en-US">
  <head>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Inventory-of-intangible-heritage</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Inventory-of-intangible-heritage" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://qzqan94-ui.github.io/Inventory-of-intangible-heritage/" />
<meta property="og:url" content="https://qzqan94-ui.github.io/Inventory-of-intangible-heritage/" />
<meta property="og:site_name" content="Inventory-of-intangible-heritage" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Inventory-of-intangible-heritage" />
<script type="application/ld+json"></script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/Inventory-of-intangible-heritage/assets/css/style.css?v=adf6ab52688232fc57e25ffc8a9b5aafc74ec50f">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/Inventory-of-intangible-heritage/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      

<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>استمارة حصر عنصر التراث - تفاعلية</title>
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="" />
<style>
  a[href="https://qzqan94-ui.github.io/Inventory-of-intangible-heritage/"] {
  display: none !important;
}
/* تصغير صندوق الأسئلة وجعله في وسط الشاشة */
.wizard {
    max-width: 500px !important;  /* عرض أصغر */
    margin: 0 auto !important;    /* وسط الشاشة */
    padding: 20px !important;
    border-radius: 12px;
}

/* على الجوال: اجعله أصغر */
@media (max-width: 600px) {
    .wizard {
        max-width: 90% !important;
        padding: 15px !important;
    }

    .question-title {
        font-size: 16px !important;
    }

    textarea, input, select {
        font-size: 15px !important;
    }
}

/* جعل الصفحة تتمدد على كل الشاشات */
body, html {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
}

/* تصغير الهوامش عند الشاشات الصغيرة */
@media (max-width: 600px) {
    .container, .pdf-page, table {
        width: 100% !important;
        max-width: 100% !important;
    }

    table th, table td {
        font-size: 14px !important;
        padding: 6px !important;
    }

    h2 {
        font-size: 18px !important;
    }

    textarea, input, select {
        font-size: 14px !important;
    }
}

/* إصلاح ضغط الجداول في صفحة النتائج */
#resultsWrap table {
    width: 100% !important;         /* تمديد الجدول كامل */
    table-layout: auto !important;  /* السماح للخانات بأخذ حجمها الطبيعي */
}

#resultsWrap td, 
#resultsWrap th {
    padding: 10px !important;       /* توزيع داخلي أفضل */
    white-space: normal !important; /* يجعل النص يتمدد بدل أن ينضغط */
    text-align: right;              /* بما أنك تعمل RTL */
}

/* فك ضغط الأعمدة وتوزيعها */
#resultsWrap tr > * {
    width: auto !important;
}


    :root{--bg:#f6f7fb;--card:#fff;--accent:#e8eefc;--border:#000}
    body{font-family: "Segoe UI", Tahoma, Arial, "Noto Naskh Arabic", sans-serif;background:#fff(--bg);padding:18px;margin:0}
    .container {
    max-width: 950px;
    width: 100%;
    margin: 0 auto;
}

    /* Results table (kept visually like original) */
    table{width:100%;border-collapse:collapse;background:#fff(--card);margin-bottom:18px}
    th,td{border:1px solid var(--border);padding:10px;vertical-align:top;font-size:15px}
    th.section-title{background:var(--accent);font-size:18px;text-align:right;font-weight:700;border:2px solid var(--border)}
    textarea,input[type=text],select{width:100%;border:0;font-size:15px;outline:none;resize:vertical;padding:6px}

    /* Wizard styles */
    .wizard{background:var(--card);padding:18px;border:1px solid #ddd;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,0.04)}
    .step{display:none}
    .step.active{display:block}
    .question-title{font-weight:700;margin-bottom:8px;font-size:16px}
    .controls{display:flex;gap:8px;justify-content:space-between;margin-top:12px}
    .controls .left{display:flex;gap:8px}
    button{padding:8px 14px;border-radius:6px;border:0;background:#1f6feb;color:#fff;cursor:pointer}
    button[disabled]{opacity:0.5;cursor:not-allowed}
    .btn-ghost{background:#eee;color:#111}
    .step-counter{font-size:14px;color:#666;margin-bottom:8px}

    /* small helper */
    .small{font-size:13px;color:#444}

    /* PDF page simulation - force 5 pages when exporting */
    .pdf-pages{width:210mm;max-width:100%;margin:0 auto}
    .pdf-page{background:var(--card);padding:14mm;margin-bottom:6mm;box-shadow:0 0 0 rgba(0,0,0,0);min-height:287mm;box-sizing:border-box}
    /* Ensure page-breaks for printing */
    .page-break{page-break-after:always}

    /* hide results by default on wizard view */
    #resultsWrap{display:none}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}

    /* responsive */
    @media (max-width:800px){.pdf-page{padding:12px}}
    /* >>> إصلاح قاطع لتمديد الجداول داخل resultsArea */
body .container #resultsWrap #resultsArea table,
body .container #resultsWrap #resultsArea table th,
body .container #resultsWrap #resultsArea table td {
  width: 100% !important;        /* إجبار العرض الكامل */
  float: none !important;        /* إلغاء أي float مفروض من الثيم */
  margin: 0 auto !important;     /* توسيط + إزالة أي margin يمين/يسار فاسد */
  table-layout: auto !important; /* السماح للخانات بأن تأخذ حجمها الطبيعي */
  display: table !important;     /* إستعادة سلوك الجدول الطبيعي */
  box-sizing: border-box !important;
}

/* تأكد من أن الخلايا لا تضغط النص */
body .container #resultsWrap #resultsArea table th,
body .container #resultsWrap #resultsArea table td {
  white-space: normal !important;
  padding: 10px !important;
  text-align: right !important; /* RTL */
}

/* إن وُجد أي selector يطبّق float على كل الجداول */
body .container #resultsWrap #resultsArea table[style] {
  /* هذا يغطي الحالات التي تضيف inline styles */
  float: none !important;
  margin: 0 auto !important;
}

/* إن استمر الثيم في استخدام قواعد أعلى أولوية (inline !important وغيرها) */
body .container #resultsWrap #resultsArea > table {
  width: 100% !important;
}
.small.example {
  font-size: 13px;
  color: #666;
  font-style: italic;
  margin-bottom: 6px;
}
.options-box {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 8px;
}

.options-box label {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 6px 10px;
    background: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 6px;
    cursor: pointer;
}
.controls {
    position: fixed;
    bottom: 130;
    left: 650;
    width: 10%;
    background: #fff;          /* خلفية بيضاء حتى لا يختفي */
    padding: 12px 15px;
    display: flex;
    justify-content: space-between;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1); /* ظل خفيف جميل */
    z-index: 9999;             /* فوق كل العناصر */
}

.controls button {
    padding: 12px 20px;
    font-size: 16px;
}


</style>
</head>
<body>
<div class="container">
  <div style="text-align:center; margin-bottom:20px;">

  <!-- الشعار فوق العنوان -->
  <img src="pp1.png" alt="logo" 
       style="
          width:250px; 
          
          margin:0 auto 10px;
       ">
  
  <!-- العنوان في المنتصف -->
  <h2 style="
      margin:0;
  ">
    استمارة حصر عناصر التراث غير المادي التفاعليه 
  </h2>

</div>


  <!-- WIZARD -->
  <div id="wizard" class="wizard" aria-live="polite">
    <div class="step-counter">سؤال <span id="currentStep">1</span> من <span id="totalSteps">24</span></div>

    <!-- Steps will be injected here -->
    <div id="stepsContainer"></div>


    <div class="controls">
      <div class="left">
        <button id="prevBtn" class="btn-ghost" type="button" disabled="">السابق</button>
      </div>
      <div class="right">
        <button id="nextBtn" type="button">التالي</button>
      </div>
    </div>
  </div>

  <!-- Results (kept same structure as provided) -->
  <div id="resultsWrap">
    <div style="margin-bottom:10px;display:flex;gap:8px;justify-content:flex-end">
      <button id="backToWizard" class="btn-ghost" type="button">العودة للأسئلة</button>
      <button id="downloadPdf">تحميل PDF (5 ورقات)</button>
    </div>

    <div id="resultsArea">
      <!-- We'll render the original tables here, populated from answers -->

     <table>
  <tr>
    <th class="section-title" colspan="0" style="
        border-top: 2px solid white;
        border-left: 2px solid white;
        border-right: 2px solid white;
        border-bottom: 2px solid black;
        background-color: white;
        padding: 10px;
        position: relative;
        text-align: center;
        height: 150px; /* فقط لضمان مساحة مناسبة للشعار */
    ">
      <!-- الشعار في المنتصف بالأعلى -->
      <img src="pp2.png" alt="Logo" 
           style="
              width:205px; 
              position:absolute; 
              top:17px; 
              left:87%; 
              transform:translateX(-50%);
           ">

      <!-- العنوان في المنتصف -->
      <h2 style="margin:0; text-align:center; width:100%; margin-top:80px;">
        استمارة حصر عناصر التراث غير المادي
      </h2>

    </th>
  </tr>





          <tr><th class="section-title" colspan="2">1 ـ تحديد عنصر التراث الثقافي غير المادي</th></tr>

          <tr><th>1.1-	اسم العنصر كما تستخدمه الجماعة المعنية (اسم العنصر في اللغة العامية)</th>
            <tr></tr>
              <td id="r_1_1"></td></tr>

          <tr><th>1.2-	عنوان مختصر ومفيد لعنصر التراث الثقافي غير المادي (يشير إلى مجال أو مجالات التراث الثقافي غير المادي الذي ينتمي إليه/إليها)</th>  <tr></tr>

              <td id="r_1_2"></td></tr>

          <tr><th>1.3 الجماعة (أو الجماعات) المعنية</th><tr></tr>
              <td id="r_1_3"></td></tr>

          <tr><th>1.4-	الموقع الطبيعي لعنصر التراث الثقافي غير المادي، ونطاق ممارسته ووتيرتها2 (الموقع الجغرافي للعنصر)</th><tr></tr>
              <td id="r_1_4"></td></tr>

          <tr><th>1.5 وصف مختصر لعنصر التراث الثقافي غير المادي</th><tr></tr>
              <td id="r_1_5"></td></tr>

          <tr><th>1.6	في اي مجال او مجلات من التراث الثقافي غير المادي يندرج العنصر؟",
</th><tr></tr>
              <td id="r_1_6"></td></tr>

          <tr><th>1.7	ما هي الوظائف والمعاني الاجتماعية والثقافية التي يقدمها العنصر لجماعته؟</th><tr></tr>
              <td id="r_1_7"></td></tr>
      </table>

      <table>
        <tr><th class="section-title" colspan="2">2 ـ خصائص العنصر</th></tr>

        <tr><th>1.2-	الممارسون/المؤدون المعنيون بشكل مباشر بأداء عنصر التراث الثقافي غير المادي وممارسته (الاسم/العمر/الجنس/عنوان التواصل)</th><tr></tr>
            <td id="r_2_1"></td></tr>

        <tr><th>2.2-	مشاركون آخرون معنيون بالعنصر ولكن بطريقة لا ترتقي إلى ممارسته وأدائة وإنما يساهمون في إدامة ممارسته أو يسهلون عملية ممارسته ونقلها (مثل الذين يُحَضِّرون مكان أو مسرح الأداء أو الأزياء أو الذين يقومون بمهام التدريب أو الإشراف أو الرعاية)'</th><tr></tr>
            <td id="r_2_2"></td></tr>

        <tr><th>2.3-	اللغة/اللغات المستخدمة في أداء أو ممارسة العنصر</th><tr></tr>
            <td id="r_2_3"></td></tr>

        <tr><th>2.4-	العناصر المادية المرتبطة بممارسة العنصر ونقله نحو الأدوات/المعدات، الأزياء، الأماكن، والأدوات الطقوسية (إن وجدت)'</th><tr></tr>
            <td id="r_2_4"></td></tr>

        <tr><th>2.5-	عناصر غير مادية أخرى (إن وجدت) مرتبطة بممارسة العنصر المعني ونقله</th><tr></tr>
            <td id="r_2_5"></td></tr>

        <tr><th>2.6-	الممارسات العرفية (إن وجدت) التي تحكم الانتفاع بالعنصر أو أي جانب من جوانبه</th><tr></tr>
            <td id="r_2_6"></td></tr>

        <tr><th>2.7	طرائق النقل إلى الأعضاء الآخرين في الجماعة او كيف يتم نقل المعارف والمهارات الخاصة بالعنصر في العصر الحالي؟</th><tr></tr>
            <td id="r_2_7"></td></tr>

        <tr><th>2.8	المنظمات المعنية (منظمات المجتمعات المحلية والمنظمات غير الحكومية أو غيرها، إن وجدت)'</th><tr></tr>
            <td id="r_2_8"></td></tr>
      </table>

      <table>
          <tr><th class="section-title" colspan="2">3 ـ حالة العنصر: قدرته على البقاء والاستدامة</th></tr>
          <tr><th>'3-1 الجهود السابقة والحالية لصون العنصر : يرجى اختيار واحد أو اكثر من الاختيارات الآتيه لتحدسد إجراءات الصون التي تم اتخاذها سابقاَ ويتم اتخاذها حالياَمن قبل الجماعات أو الافراد المعنية بالعنصر</th><tr></tr>
              <td id="r_3_1"></td></tr>

          <tr><th>3.2 الجهة (الجهات) المختصة القائمة على عملية الصون</th><tr></tr>
              <td id="r_3_2"></td></tr>

          <tr><th>3.3 حالة العنصر في الوقت الحالي</th><tr></tr>
              <td id="r_3_3"></td></tr>

          <tr><th>3.4 التهديدات (إن وجدت) التي تحدد بالأداء المتواصل للعنصر في إطارالجماعة/الجماعات المعنية</th><tr></tr>
              <td id="r_3_4"></td></tr>

              <tr><th>3.5 التهديدات (إن وجدت) التي تحدق بانتقال العنصر في إطار الجماعة/الجماعات المعنية</th><tr></tr>
              <td id="r_3_5"></td></tr>
              
              <tr><th>3.6 التهديدات التي تحدق باستدامة الانتفاع بالعناصر المادية والموارد (إن وجدت) المرتبطة بعنصر التراث الثقافي غير المادي.</th><tr></tr>
              <td id="r_3_6"></td></tr>

          <tr><th>3.7 قابلية استدامة عناصر التراث غير المادي الأخرى (إن وجت) المرتبطة بالعنصر</th><tr></tr>
              <td id="r_3_7"></td></tr>

          <tr><th>3.8 تدابير الصون المتخذة في المكان (إن وجدت) أو غيرها لمعالجة أي من هذه التهديدات، وتشجيع ممارسة العنصر ونقله في المستقبل </th><tr></tr>
              <td id="r_3_8"></td></tr>
      </table>

      <table>
          <tr><th class="section-title" colspan="2">4 ـ القيود والأذونات على البيانات</th></tr>

          <tr><th>4.1 موافقة الجماعة/الجماعات المعنية على توفير المعلومات ومشاركتهم في جمعها</th><tr></tr>
              <td id="r_4_1"></td></tr>

          <tr><th>4.2 القيود (إن وجدت) المفروضة على مسالة الانتفاع بالبيانات واستعمالها</th><tr></tr>
              <td id="r_4_2"></td></tr>

          <tr><th>4.3 تواريخ جمع المعلومات وأمكنتها</th><tr></tr>
              <td id="r_4_3"></td></tr>

          <tr><th>4.4 الأشخاص المخبرون (الرواة/المزودون بالمعلومات) (أسماؤهم، ومكانتهم، وانتماؤهم)</th><tr></tr>
              <td id="r_4_4"></td></tr>
      </table>

      <table>
          <tr><th class="section-title" colspan="2">5 ـ المراجع</th></tr>
          <tr><th>5.1 الأدبيات: كتب، مقالات... وغيرها</th><tr></tr>
              <td id="r_5_1"></td></tr>
          <tr><th>5.2 المواد السمعية والبصرية، تسجيلات إلخ في المحفوظات والمتاحف والمجموعات الخاصة (إن وجدت)</th><tr></tr>
              <td id="r_5_2"></td></tr>

          <tr><th>5.3 مواد وثائقية، وأدوات في دور المحفوظات والمتاحف والمجموعات الخاصة (إن وجدت)</th><tr></tr>
              <td id="r_5_3"></td></tr>
      </table>

    </div>

    <!-- PDF pages container (hidden in UI but used when generating PDF) -->
    <div id="pdfPagesContainer" style="display:none"></div>
  </div>

</div>

<!-- include html2pdf from CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script>
// Definition of fields/questions in order (one page = one question view)
const questions = [
  {id:'q_1_1',label:'1.1-	اسم العنصر كما تستخدمه الجماعة المعنية (اسم العنصر في اللغة العامية)',type:'text',placeholder:'مثال: رقصة العرضة', example:'مثال:(اسم العنصر في اللغة العامية) '},
  {id:'q_1_2',label:'1.2-	عنوان مختصر ومفيد لعنصر التراث الثقافي غير المادي (يشير إلى مجال أو مجالات التراث الثقافي غير المادي الذي ينتمي إليه/إليها)',type:'text',placeholder:'مثال: رقصة تراثية شعبية', example:'يشير إلى مجال أو مجالات التراث الثقافي غير المادي الذي ينتمي إليه/إليها'},
  {id:'q_1_3',label:'الجماعة (أو الجماعات) المعنية',type:'text',placeholder:'مثال: سكان منطقة عسير', example:'مثال: سكان منطقة عسير'},
  {id:'q_1_4',label:'1.4-	الموقع الطبيعي لعنصر التراث الثقافي غير المادي، ونطاق ممارسته ووتيرتها2 (الموقع الجغرافي للعنصر)',type:'text',placeholder:'مثال: جنوب السعودية – منطقة عسير', example:'مثال: جنوب السعودية – منطقة عسير'},
  {id:'q_1_5',label:'1.5-	وصف مختصر لعنصر التراث الثقافي غير المادي ',type:'textarea',placeholder:'مثال: رقصة شعبية تؤدى في المناسبات', example:'مثال: رقصة شعبية تؤدى في المناسبات'},
  {
  id: "q_1_6",
  label: "1.6	في اي مجال او مجلات من التراث الثقافي غير المادي يندرج العنصر؟",
  type: "checkbox",
  options: [
    "الفنون الأدائية",
    "التقاليد الشفهية",
    "الطقوس والاحتفالات",
    "المعارف المرتبطة بالطبيعة",
    "الحرف التقليدية"
  ]
},
{id:'q_1_7',label:'1.7	ما هي الوظائف والمعاني الاجتماعية والثقافية التي يقدمها العنصر لجماعته؟',type:'textarea',placeholder:'مثال: تعزيز الانتماء الاجتماعي، الاحتفال بالمناسبات', example:'مثال: تعزيز الانتماء الاجتماعي، الاحتفال بالمناسبات'},

  {id:'q_2_1',label:'1.2-	الممارسون/المؤدون المعنيون بشكل مباشر بأداء عنصر التراث الثقافي غير المادي وممارسته (الاسم/العمر/الجنس/عنوان التواصل)',type:'textarea',value:
`الاسم:
العمر:
الجنس:
التواصل:`, example:'مثال:\nالاسم: محمد\nالعمر: 35\nالجنس: ذكر\nالتواصل: 0500000000'},
  {id:'q_2_2',label:'2.2-	مشاركون آخرون معنيون بالعنصر ولكن بطريقة لا ترتقي إلى ممارسته وأدائة وإنما يساهمون في إدامة ممارسته أو يسهلون عملية ممارسته ونقلها (مثل الذين يُحَضِّرون مكان أو مسرح الأداء أو الأزياء أو الذين يقومون بمهام التدريب أو الإشراف أو الرعاية)',type:'textarea',value:
`الاسم:
العمر:
الجنس:
التواصل:`, example:'مثال:\nالاسم: فاطمة\nالعمر: 28\nالجنس: أنثى\nالتواصل: 0500000001'},
  {id:'q_2_3',label:'2.3-	اللغة/اللغات المستخدمة في أداء أو ممارسة العنصر',type:'text',value:'اللغة العربية', example:'مثال: العربية'},
  {id:'q_2_4',label:'2.4-	العناصر المادية المرتبطة بممارسة العنصر ونقله (نحو الأدوات/المعدات، الأزياء، الأماكن، والأدوات الطقوسية (إن وجدت)',type:'textarea', example:'مثال: الدفوف، الزي التقليدي'},
  {id:'q_2_5',label:'2.5-	عناصر غير مادية أخرى (إن وجدت) مرتبطة بممارسة العنصر المعني ونقله ',type:'textarea', example:'مثال: الأهازيج، الأغاني الشعبية'},
  {id:'q_2_6',label:'2.6-	الممارسات العرفية (إن وجدت) التي تحكم الانتفاع بالعنصر أو أي جانب من جوانبه',type:'textarea', example:'مثال: الاحتفال بالأعياد الوطنية والعائلية'},
  {id:'q_2_7',label:'2.7	طرائق النقل إلى الأعضاء الآخرين في الجماعة او كيف يتم نقل المعارف والمهارات الخاصة بالعنصر في العصر الحالي؟',type:'text', example:'مثال: التعلم الشفهي، التعليم المدرسي'},
  {id:'q_2_8',label:'2.8	المنظمات المعنية (منظمات المجتمعات المحلية والمنظمات غير الحكومية أو غيرها، إن وجدت)',type:'textarea', example:'مثال: جمعية التراث الشعبي، مكتب الثقافة بالمنطقة'},

{id: 'q_3_1',
 label: '3-1 الجهود السابقة والحالية لصون العنصر : يرجى اختيار واحد أو اكثر من الاختيارات الآتيه لتحدسد إجراءات الصون التي تم اتخاذها سابقاَ ويتم اتخاذها حالياَمن قبل الجماعات أو الافراد المعنية بالعنصر',
 type: 'checkbox',
 options: [
   'النقل، لا سيما من خلال التعليم الرسمي وغير الرسمي',
   'التوثيق والبحث',
   'الحفظ والحماية',
   'الترويج والتعزيز',
   'لا توجد جهود صون'
 ],
 example: 'اختر كل الجهود المنفذة مسبقًا أو الحالية'},
  {id:'q_3_2',label:'3.2 الجهة (الجهات) المختصة القائمة على عملية الصون',type:'text', example:'مثال: وزارة الثقافة، جمعية التراث'},
  {id: 'q_3_3',
 label: '3.3 حالة العنصر في الوقت الحالي:',
 type: 'checkbox',
 options: [
   'مهدد بالاندثار',
   'أصبح مندثرا/ لا يؤدي وظيفته في المجتمع او الجماعات',
   'مهدد بالاندثار'
 ],
 example: ''},

  {id:'q_3_4',label:'3.4 التهديدات (إن وجدت) التي تحدد بالأداء المتواصل للعنصر في إطارالجماعة/الجماعات المعنية ',type:'textarea', example:'مثال: قلّة الممارسين، ضعف الدعم المالي'},
  {id:'q_3_5',label:'3.5 التهديدات (إن وجدت) التي تحدق بانتقال العنصر في إطار الجماعة/الجماعات المعنية',type:'textarea', example:'مثال: قلّة الممارسين، ضعف الدعم المالي'},
  {id:'q_3_6',label:'3.6 التهديدات التي تحدق باستدامة الانتفاع بالعناصر المادية والموارد (إن وجدت) المرتبطة بعنصر التراث الثقافي غير المادي. ',type:'textarea', example:'مثال: قلّة الممارسين، ضعف الدعم المالي'},
  
  {id:'q_3_7',label:'3.7 قابلية استدامة عناصر التراث غير المادي الأخرى (إن وجت) المرتبطة بالعنصر ',type:'text', example:'مثال: عالية، بوجود برامج تعليمية'},
  {id:'q_3_8',label:'3.8 تدابير الصون المتخذة في المكان (إن وجدت) أو غيرها لمعالجة أي من هذه التهديدات، وتشجيع ممارسة العنصر ونقله في المستقبل ',type:'textarea', example:'مثال: إنشاء ورش تعليمية، تسجيل فيديوهات للممارسات'},

  {id:'q_4_1',label:'4.1 موافقة الجماعة/الجماعات المعنية على توفير المعلومات ومشاركتهم في جمعها',type:'text', example:'مثال: نعم، تم الحصول على الموافقة'},
  {id:'q_4_2',label:'4.2 القيود (إن وجدت) المفروضة على مسالة الانتفاع بالبيانات واستعمالها',type:'text', example:'مثال: الاستخدام لأغراض البحث فقط'},
  {id:'q_4_3',label:'4.3 تواريخ جمع المعلومات وأمكنتها',type:'textarea',value:`الاسم:
العمر:
الجنس:
التواصل:`, example:'مثال:\nالاسم: علي\nالمكانة: شيخ الحي\nالانتماء: المجتمع المحلي'},
  {id:'q_4_4',label:'4.4 الأشخاص المخبرون (الرواة/المزودون بالمعلومات) (أسماؤهم، ومكانتهم، وانتماؤهم)',type:'text', example:'مثال: 01/10/2025 - 05/10/2025'},

  {id:'q_5_1',label:'5.1 الأدبيات: كتب، مقالات... وغيرها',type:'textarea', example:'مثال: كتب ودراسات عن التراث الشعبي'},
  {id:'q_5_2',label:'5.2 المواد السمعية والبصرية، تسجيلات إلخ في المحفوظات والمتاحف والمجموعات الخاصة (إن وجدت)',type:'text', example:'مثال: تسجيلات صوتية، فيديوهات للرقصات'},
  {id:'q_5_3',label:'5.3 مواد وثائقية، وأدوات في دور المحفوظات والمتاحف والمجموعات الخاصة (إن وجدت)',type:'text',  example:'مثال: أدوات موسيقية، صور أرشيفية'}
];

const totalSteps = questions.length;
document.getElementById('totalSteps').textContent = totalSteps;

// Render steps
const stepsContainer = document.getElementById('stepsContainer');
questions.forEach((q, idx)=>{
  const step = document.createElement('div');
  step.className = 'step';
  step.id = 'step_'+idx;

  const title = document.createElement('div');
  title.className = 'question-title';
  title.textContent = q.label;
  step.appendChild(title);

  let input;
if(q.type === 'textarea'){
    input = document.createElement('textarea');
    input.rows = 6;
} else if(q.type === 'select'){
    input = document.createElement('select');
    q.options.forEach(opt => {
        const o = document.createElement('option');
        o.value = opt;
        o.textContent = opt;
        input.appendChild(o);
    });
} else if(q.type === 'checkbox'){    // ← دعم checkbox
    const box = document.createElement('div');
    box.className = 'options-box';

    q.options.forEach(opt => {
        const lbl = document.createElement('label');
        lbl.innerHTML = `<input type="checkbox" name="${q.id}[]" value="${opt}"> ${opt}`;
        box.appendChild(lbl);
    });

    input = box;   // استخدم div كـ input
} else {
    input = document.createElement('input');
    input.type = 'text';
}

// إعداد الخصائص العامة لكل نوع
input.id = q.id;
input.setAttribute('aria-label', q.label);
if(q.value && q.type !== 'checkbox') input.value = q.value; // قيمة checkbox لا تُضاف هنا
step.appendChild(input);

// إضافة مثال إذا وُجد
if(q.example){
    const ex = document.createElement('div');
    ex.className = 'small example';
    ex.textContent = q.example;
    step.appendChild(ex);
}



  // helper text
  const helper = document.createElement('div');
  helper.className='small';
  helper.textContent='أدخل الإجابة ثم اضغط التالي. يمكنك الرجوع بالضغط على السابق.';
  step.appendChild(helper);

  stepsContainer.appendChild(step);
});

// show first step
let current = 0;
function showStep(n){
  document.querySelectorAll('.step').forEach((el,i)=>{
    el.classList.toggle('active', i===n);
  });
  document.getElementById('currentStep').textContent = n+1;
  document.getElementById('prevBtn').disabled = n===0;
  const nextBtn = document.getElementById('nextBtn');
  nextBtn.textContent = (n===totalSteps-1)?'إنهاء وعرض النتائج':'التالي';
}
showStep(current);

// Navigation
document.getElementById('nextBtn').addEventListener('click', ()=>{
  const curQ = questions[current];
  let val = '';


  // حفظ الإجابة مؤقتًا في العنصر نفسه (اختياري)
  curQ._answer = val;

  if(current < totalSteps-1){
    current++;
    showStep(current);
    window.scrollTo(0,0);
  } else {
    // finish -> populate results
    populateResults();
    document.getElementById('wizard').style.display='none';
    document.getElementById('resultsWrap').style.display='block';
    window.scrollTo(0,0);
  }
});


document.getElementById('prevBtn').addEventListener('click', ()=>{
  if(current>0){current--;showStep(current);window.scrollTo(0,0)}
});

document.getElementById('backToWizard').addEventListener('click', ()=>{
  document.getElementById('resultsWrap').style.display='none';
  document.getElementById('wizard').style.display='block';
  // go to last question
  current = 0; showStep(current); window.scrollTo(0,0);
});

// Populate results into table
function populateResults(){
  // mapping from question id to result element id
  const map = {
    'q_1_1':'r_1_1','q_1_2':'r_1_2','q_1_3':'r_1_3','q_1_4':'r_1_4','q_1_5':'r_1_5','q_1_6':'r_1_6','q_1_7':'r_1_7',
    'q_2_1':'r_2_1','q_2_2':'r_2_2','q_2_3':'r_2_3','q_2_4':'r_2_4','q_2_5':'r_2_5','q_2_6':'r_2_6','q_2_7':'r_2_7','q_2_8':'r_2_8',
    'q_3_1':'r_3_1','q_3_2':'r_3_2','q_3_3':'r_3_3','q_3_4':'r_3_4','q_3_5':'r_3_5','q_3_6':'r_3_6','q_3_7':'r_3_7','q_3_8':'r_3_8',
    'q_4_1':'r_4_1','q_4_2':'r_4_2','q_4_3':'r_4_3','q_4_4':'r_4_4',
    'q_5_1':'r_5_1','q_5_2':'r_5_2','q_5_3':'r_5_3'
  };
  for(const q of questions){
  let displayVal = '';

  if(q.type === 'checkbox'){
      // عرض جميع الخيارات، وضع ✓ أمام المختارة فقط
      displayVal = q.options.map(opt => {
          const isChecked = Array.from(document.querySelectorAll(`#${q.id} input[type=checkbox]`))
                                 .some(cb => cb.value === opt && cb.checked);
          return isChecked ? `✔ ${opt}` : opt;
      }).join('<br>');
  } else {
      displayVal = (document.getElementById(q.id).value || '');
  }

  displayVal = displayVal.replace(/\n/g,'<br>');

  const rid = map[q.id];
  if(rid) document.getElementById(rid).innerHTML = displayVal;
}



  // Prepare PDF pages (5 pages) by splitting sections logically
  const pages = [];
  // page 1: section 1
  pages.push(document.querySelector('table:nth-of-type(1)').outerHTML);
  // page 2: section 2
  pages.push(document.querySelector('table:nth-of-type(2)').outerHTML);
  // page 3: section 3
  pages.push(document.querySelector('table:nth-of-type(3)').outerHTML);
  // page 4: section 4
  pages.push(document.querySelector('table:nth-of-type(4)').outerHTML);
  // page 5: section 5
  pages.push(document.querySelector('table:nth-of-type(5)').outerHTML);

  // build pdf pages container hidden
  const pdfContainer = document.getElementById('pdfPagesContainer');
  pdfContainer.innerHTML = '';
  pages.forEach((html, i)=>{
    const page = document.createElement('div');
    page.className = 'pdf-page';
    page.innerHTML = html;
    pdfContainer.appendChild(page);
    if(i < pages.length-1){ const br=document.createElement('div'); br.className='page-break'; pdfContainer.appendChild(br);} 
  });
}

document.getElementById('downloadPdf').addEventListener('click', ()=>{
  const pdfContainer = document.getElementById('pdfPagesContainer');
  
  if(!pdfContainer.innerHTML.trim()){
    alert('يرجى أولًا إنهاء الإجابة على الأسئلة لعرض النتائج ثم تحميل PDF.');
    return;
  }

  const opt = {
    margin:       [0,0,0,0],
    filename:     'استمارة_حصر_عنصر_التراث.pdf',
    image:        { type: 'jpeg', quality: 1 },
    html2canvas:  { scale: 3, useCORS: true, letterRendering: true },
    jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
  };

  pdfContainer.style.display = 'block';

// نسخ العنصر
// نسخ العنصر
const clone = pdfContainer.cloneNode(true);
clone.style.width = '210mm';
clone.style.minHeight = '297mm';
clone.style.boxSizing = 'border-box';

// ضبط الخلايا لتكون RTL
clone.querySelectorAll('td, th').forEach(cell => {
  cell.style.textAlign = 'right';  // محاذاة النص لليمين
  cell.style.direction = 'rtl';    // اتجاه الكتابة من اليمين لليسار
});

// نسخ القيم التفاعلية إلى نصوص ثابتة
clone.querySelectorAll('input, textarea, select').forEach(el => {
  const value = el.value;
  const span = document.createElement('span');
  span.textContent = value;

  span.style.display = 'block';
  span.style.textAlign = 'right';
  span.style.direction = 'rtl';
  span.style.whiteSpace = 'pre-wrap';

  el.parentNode.replaceChild(span, el);
});

// تغليف العنصر
const wrapper = document.createElement('div');
wrapper.style.width = '210mm';
wrapper.appendChild(clone);

// توليد PDF
html2pdf()
  .set(opt)
  .from(wrapper)
  .toPdf()
  .get('pdf')
  .then((pdf) => {
      const totalPages = pdf.internal.getNumberOfPages();
      
      // حذف الصفحات بعد الصفحة الخامسة
      for(let i = totalPages; i > 5; i--){
          pdf.deletePage(i);
      }
  })
  .save()
  .then(()=>{
      pdfContainer.style.display = 'none';
  })
  .catch(err=>{
      console.error(err);
      alert('حدث خطأ أثناء إنشاء ملف PDF.');
  });


});


// initialize by focusing first input
setTimeout(()=>{ const firstInput=document.getElementById(questions[0].id); if(firstInput) firstInput.focus(); },300);
</script>
</body>
</html>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
